<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Carthageo Test</title>

  <!-- jquery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

  <!-- bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

  <!-- leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
  <script src="https://unpkg.com/geojson-popup@2.0.0-beta#._.js"></script>










<!-- def #carte is my map on the page epreuve -->
  <style>#carte { height: 650px; background-color: aqua; }
  .leaflet-control.info{
    background-color: antiquewhite;
  }
  </style>
  <!-- <style>#USMap { height: 500px; background-color: aqua; }</style> -->
  <!-- <style>#geomap { height: 500px; background-color: pink; }</style> -->
  <style>#logo { width:150px; background-color: white; }
  .leaflet-control.info{
    background-color: antiquewhite;
  }
  </style>

  <style> .info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
    }
    .info img{
      height: 50px;
    }
    </style>

  <style>.info h4 {
    margin: 0 0 5px;
    color: #777;
   }</style>
  <style>.legend {
  line-height: 18px;
  color: #555;
  }</style>
  <style>.legend i {
    width: 18px;
    height: 18px;
    float: left;
    margin-right: 8px;
    opacity: 0.7;
  }</style>

</head>
<body>
  <div class="container">
    <%- include("nav") -%>
    <h1>Épreuves & Nombre de médailles des Jeux Olympiques</h1>
    <h2>Information cartographique</h2>
    <div id="carte"></div>
    <h2>Information graphique</h2>
    <form action="#" method="get" id="forme_date">
      <fieldset>
      <span>Date : </span>
      <select name="olym_date" id="year">
        <option class="date" type="option" value="0"><b>Séléctionnez une date</b></a></option>
        <option class="date" type="option" value="1">1896</a></option>
        <option class="date" type="option" value="2">1900</a></option>
        <option class="date" type="option" value="3">1904</a></option>
        <!-- <option class="date" type="option" id="A">1906</a></option> -->
        <option class="date" type="option" value="4">1908</a></option>
        <option class="date" type="option" value="5">1912</a></option>
        <option class="date" type="option" value="6">1920</a></option>
        <option class="date" type="option" value="7">1924 Été</a></option>
        <option class="date" type="option" value="8">1924 Hiver</a></option>
        <option class="date" type="option" value="9">1928 Été</a></option>
        <option class="date" type="option" value="10">1928 Hiver</a></option>
        <option class="date" type="option" value="11">1932 Été</a></option>
        <option class="date" type="option" value="12">1932 Hiver</a></option>
        <option class="date" type="option" value="13">1936 Été</a></option>
        <option class="date" type="option" value="14">1936 Hiver</a></option>
        <option class="date" type="option" value="15">1948 Été</a></option>
        <option class="date" type="option" value="16">1948 Hiver</a></option>
        <option class="date" type="option" value="17">1952 Été</a></option>
        <option class="date" type="option" value="18">1952 Hiver</a></option>
        <option class="date" type="option" value="19">1956 Été</a></option>
        <option class="date" type="option" value="20">1956 Hiver</a></option>
        <option class="date" type="option" value="21">1960 Été</a></option>
        <option class="date" type="option" value="22">1960 Hiver</a></option>
        <option class="date" type="option" value="23">1964 Été</a></option>
        <option class="date" type="option" value="24">1964W</a></option>
        <option class="date" type="option" value="25">1968 Été</a></option>
        <option class="date" type="option" value="26">1968 Hiver</a></option>
        <option class="date" type="option" value="27">1972 Été</a></option>
        <option class="date" type="option" value="28">1972 Hiver</a></option>
        <option class="date" type="option" value="29">1976 Été</a></option>
        <option class="date" type="option" value="30">1976 Hiver</a></option>
        <option class="date" type="option" value="31">1980 Été</a></option>
        <option class="date" type="option" value="32">1980 Hiver</a></option>
        <option class="date" type="option" value="33">1984 Été</a></option>
        <option class="date" type="option" value="34">1984 Hiver</a></option>
        <option class="date" type="option" value="35">1988 Été</a></option>
        <option class="date" type="option" value="36">1988 Hiver</a></option>
        <option class="date" type="option" value="37">1992 Été</a></option>
        <option class="date" type="option" value="38">1992 Hiver</a></option>
        <option class="date" type="option" value="39">1994</a></option>
        <option class="date" type="option" value="40">1996</a></option>
        <option class="date" type="option" value="41">1998</a></option>
        <option class="date" type="option" value="42">2000</a></option>
        <option class="date" type="option" value="43">2002</a></option>
        <option class="date" type="option" value="44">2004</a></option>
        <option class="date" type="option" value="45">2006</a></option>
        <option class="date" type="option" value="46">2008</a></option>
        <option class="date" type="option" value="47">2010</a></option>
        <option class="date" type="option" value="48">2012</a></option>
        <option class="date" type="option" value="49">2014</a></option>
        <!-- <option class="date" type="option" id="50">2016</a></option>
        <option class="date" type="option" id="51">2018</a></option>
        <option class="date" type="option" id="52">2020</a></option> -->
      </select>
      </fieldset>

    </form>

    <form action="#" method="get" id="forme_pays">
      <fieldset>
      <span>Pays : </span>

      <select name="olym_pays" id="pays">
      </select>
      </fieldset>

    </form>
    <!-- <form action="#" method="get" id="forme_type_medal">
      <fieldset>
      <span>Type : </span>
      <select name="type_medal" id="type">
        <option class="type" type="option" value="gold">gold</a></option>
        <option class="type" type="option" value="silver">silver</a></option>
        <option class="type" type="option" value="bronze">bronze</a></option>
      </fieldset>
      </select>
    </form> -->



    <canvas id="myChart" width="400" height="400"></canvas>

    <div id="result">
    </div>

    <%- include("footer") -%>
  </div>




<!--chercher exoleaflet.js sur folder js(ordre est important. FA)-->
<!-- <script src="js/us-states.js"></script>
<script src="js/exoleaflet.js"></script> -->
<script>
function pays(){
  var formepays = document.getElementById('forme_pays').elements["olym_pays"];
  var countrys = [];
  fetch('/api/bdd/track',{
    method : 'post',
    body: JSON.stringify({ hello: "9"}),
    headers: {'Content-Type': 'application/json'}
  })
    .then(req => req.json())
    .then((req) => {
      console.log(req);
      for (var i =0; i < req.features.length;i++){
        countrys += req.features[i].propertie.country;
        var option = document.createElement('option');
        option.innerHTML = req.features[i].propertie.country;
        formepays.appendChild(option);
      }
    console.log(countrys);
  })
}
pays();
</script>
<script src="js/mychat.js"></script>
<script src="js/epreuve.js"></script>
</body>
</html>
